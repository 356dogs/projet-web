<html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game 4x2</title>
    <link rel="stylesheet" href="grille-4-2.css">
</head>
<body>
    <header>
        <h1>Memory Game 4x2</h1>
    </header>
    <div class="Grille-jeu" id="Grille-jeu"></div>

    <script type="module">
        import { Creation_grille, Gestion_retournement } from './Gestion_Grille.js';
        import { liste_cartes } from './Gestion_Cartes.js';

        let x_grille = 5;
        let y_grille = 4;

        // Creation de la grille aleatoire 
        const grille = Creation_grille(x_grille, y_grille, liste_cartes);
        
        // On saisie la grille html dans le code
        const grille_html = document.getElementById('Grille-jeu');

        //on a besoin d'un compteur pour savoir combien de cartes on a retourner.
        let nb_cartes_retourne = 0;
        
        for(let y = 1; y < y_grille+1; y++){ // y colonnes
            for(let x = 1; x < x_grille+1; x++){ // x lignes
                const divCarte = document.createElement('div');
                divCarte.className = 'carte';
                divCarte.id = 'carte' + x + "_" + y;

                const backSide = document.createElement('img');
                backSide.className = 'carte-back';
                backSide.src = grille[y-1][x-1].back_side;

                const frontSide = document.createElement('img');
                frontSide.className = 'carte-front';
                frontSide.src = grille[y-1][x-1].front_side;
                
                divCarte.appendChild(backSide);
                divCarte.appendChild(frontSide);

                divCarte.addEventListener('click', () => {
                    Gestion_retournement(grille, nb_cartes_retourne, x, y);
                });

                grille_html.appendChild(divCarte);
            }
        }
    </script>
</body>
</html>